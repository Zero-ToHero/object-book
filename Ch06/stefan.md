# Ch06. 메시지와 인터페이스

### 협력과 메시지

- 협력은 객체가 다른 객체에게 메시지를 보내면서 시작된다.
- 메시지 = 오퍼레이션 명 + 인자
- 메서드: 메시지를 수신했을 때, 실행되는 함수 or 프로시저
- 메시지를 수신한 객체는 자율적으로 처리할 수 있다. (자율성을 갖춘 객체)
- 객체는 내부와 외부를 구분하는 뚜렷한 경계를 가진다.
  - 퍼블릭 인터페이스 = 외부에 공개하는 메시지 집합
  - 오퍼레이션 = 퍼블릭 인터페이스를 구성하는 메시지 -> 수행하는 행동에 대한 추상화.
  - 메서드: 메시지 수신시 실제로 실행되는 코드

### 인터페이스와 설계 품질

- 좋은 인터페이스의 조건: `최소한의`, `추상적인` 인터페이스
- 인터페이스의 품질에 영향을 주는 원칙과 기법
  - 디미터의 법칙
    - 객체 내부 구조와의 강한 결합을 막기 위함.
    - 객체 내부가 어떻게 생겼는지를 노출한다. -> `캡슐화를 깨뜨리고, 결합도를 높인다.`

```ts
condition.getStartTime().compareTo(screening.getWhenScreened().toLocalTime());
```

    - Tell Don't Ask (묻지말고 시켜라)
    	- 상태를 묻고 그에 따른 행동을 고르지 말아야한다.
    	- 그냥 행동을 시켜라. 메시지 수신자가 자율적으로 결정하도록 해야한다.
    		- 그래야 수신자 객체의 자율성을 높일 수 있다. 캡슐화도 안 깨뜨릴 수 있다.
    		- 특정 상태에 따라 행동을 결정하는 것도 수신자 객체의 책임이다.
    	- 이 원칙을 지키면 ch5에서 배웠던 정보 전문가 패턴을 자연스레 따르게 된다.
    - 의도를 드러내는 인터페이스
    	- `How`대신 `What`에 치중하여 메서드명 잘 짓기
    	- 구현 설명하는 이름으로 짓지말고, 책임을 설명하는 이름으로 짓자.
    - 명령-쿼리 분리
    	- 프로시저(명령 - command): 부수효과를 일으킴. 반환값 없음. 예) setter
    	- 함수(쿼리 - query): 부수효과 일으키지 않음, 반환값 존재. 예) getter
    		- 명령과 쿼리를 분리하면 참조 투명성의 장점을 갖는다.
    			- 참조 투명성이란 동일한 입력에 대해 항상 동일한 값을 반환하는 것.
    			- 불변성이라고도 함. -> 부수효과가 발생하지 않는다는 말과 동일.
    			- 참조 투명성을 만족하면 마음껏 순서를 변경할 수 있음.

- 원칙이 현재 상황에 부적합하다면 과감하게 원칙 무시하기.
- 원칙이 언제 유용하고 언제 유용하지 않은지를 판단하는 능력을 길러야함.
- 소프트웨어 설계에는 법칙은 존재하지 않는다.
