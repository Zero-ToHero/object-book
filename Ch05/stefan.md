# Ch05. 책임 할당하기

- 책임 주도 설계

  - 협력과 책임에 초점을 맞추고 설계하기.
  - 데이터보다 행동을 먼저 결정해야함.
    - 데이터를 너무 이른 시기에 결정 -> 캡슐화 약화 -> ,응집도 낮아짐, 결합도 높아짐.
  - 협력이라는 문맥 안에서 책임 결정
    - 책임은 협력에 적합해야함.
    - 협력에 적합한 책임: 메시지 전송자에게 적합한 책임
      - 메시지 먼저 정하고 그걸 처리할 객체를 정해야함.
      - 메시지가 객체를 정하도록 하기
  - 책임에 초점을 맞추면 캡슐화를 지키기가 쉬워짐.
  - 책임 할당에는 정답이 있지 않다. (트레이드오프)

    - GRASP 패턴 (General Responsibility Assignment Software Pattern: 책임 할당의 나침반으로 삼을 수 있는 원칙 모음)

  - 도메인 먼저 정리하되, 완벽하게 할 필요 없다.
  - 빠르게 설계와 구현 진행하기

  1.  정보 전문가에게 책임 할당하기 (INFORMATION EXPERT)
      - 메시지를 잘 처리할 수 있는 객체가 책임을 지도록.
  2.  낮은 결합도 (LOW COUPLING)
      - 결합도가 낮은 설계 선택.
  3.  높은 응집도 (HIGH COHESION)
      - 응집도가 높은 설계 선택.
  4.  창조자에게 객체 생성 책임 할당 (CREATOR)
      - 객체 생성에 대한 책임을 할당하는 조건
        1.  B가 A객체를 포함 or 참조
            - 결합
        2.  B가 A객체를 기록
        3.  B가 A객체를 긴밀하게 사용
            - 이미 결합돼 있음.
        4.  B가 A객체를 초기화하는 데 필요한 데이터를 가지고 있다.
            - B는 A에 대한 정보 전문가: 생성이라는 책임을 수행하기 위한 정보를 알고 있음.
  5.  다형성 패턴 (POLYMORPHISM)
      - 역할을 사용하여 각각 다른 행동을 하는 객체의 구체적인 타입 추상화
  6.  변경 보호 (PROTECTED VARIATIONS)
      - 클래스를 변경에 따라 분리
      - 인터페이스로 변경을 캡슐화. (책임 안에서 다른 구현의 객체를 갈아끼움)

- 설계를 주도하는 것은 변경.
  - 변경에 대비하는 방법
    1. 코드를 단순하고 쉽게 설계.
    2. 코드를 유연하게 만들기.
- 책임 주도 설계는 어렵다.
  - 0에서 시작하기 보다는 기능을 빠르게 구현하고 리팩터링을 통해서 코드 개선하는 것이 좋다.
    1. 메서드 응집도를 높이고
    2. 객체를 자율적으로 만들자.
