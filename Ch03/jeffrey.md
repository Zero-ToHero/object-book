# 3. 역할, 책임, 협력

## 협력

- 어떤 객체가 다른 객체에게 무엇인가를 요청하는 것.
- 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것
- 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력
- 객체를 설계하는 데 필요한 일종의 문맥(context)를 제공

## 책임

- 협력에 참여하기 위해 객체가 수행하는 행동
- 객체에 의해 정의되는 응집도 있는 행위의 집합
- 무엇을 알고 있는가(knowing), 무엇을 할 수 있는가(doing)로 구성.
- 객체지향 설계의 핵심

### 책임 할당

- 협력을 설계하는 출발점은 시스템이 사용자에게 제공하는 기능을 시스템이 담당할 하나의 책임으로 바라보는 것
- 객체가 책임을 수행하게 하는 유일한 방법은 메시지를 전송하는 것
- 책임을 할당한다는 것은 메시지의 이름을 결정하는 것이다.
- 메시지를 선택했으면 처리할 적절한 객체를 선택
- 결정된 메시지가 객체의 퍼블릭 인터페이스를 구성
- 최종적으로 얻게되는 결과물은, 시스템을 구성하는 객체들의 인터페이스와 오퍼레이션의 목록.

### 책임 주도 설계

- 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법
- 시스템 책임을 파악
- 더 작은 책임으로 분할
- 적절한 객체 또는 역할을 찾아 책임을 할당
- 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다
- 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력

### 메시지가 객체를 결정한다.

- 책임 할당 시, 필요한 메시지를 먼저 식별하고 메시지를 처리할 객체를 나중에 선택한다.
- 메시지가 객체를 선택하게 해야 하는 이유
    - 최소한의 인터페이스를 가질 수있게 된다.
    - 추상적인 인터페이스를 가질 수있게 된다.
        - 인터페이스 : 무엇(What)을 표현. 어떻게(How) 수행하는지를 노출해서는 안 된다.
        - 메시지 : 외부의 객체가 요청하는 무언가를 의미하기에, 먼저 식별하면 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있다.

### 행동이 상태를 결정한다.

- 행동은 객체가 협력에 참여할 수 있는 유일한 방법
- 적절한 객체를 창조했느냐는 얼마나 적절한 책임을 할당했느냐에 달림
- 책임이 얼마나 적절한지는 협력에 얼마나 적절한가에 달림
- 상태는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료.

## 역할

- 객체의 목적은 협력 안에서 객체가 맡게 되는 책임의 집합으로 표시
- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 `역할` 이라고 부름.
- 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다
- 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있다.
- 동일한 책임을 수행하는 역할을 기반으로 여러 개의 협력을 하나로 통합할 수있다.
    - 불필요한 중복 코드 제거
    - 협력이 더 유연해짐
- 역할 구현의 가장 일반적인 방법은 `추상 클래스` 와 `인터페이스` 를 사용하는 것.
    - 추상 클래스 : 책임의 일부를 구현해놓은 것
    - 인터페이스 : 일체의 구현 없이 책임의 집합만을 나열해 놓은 것
- 다양한 종류의 객체를 수용할 수 있는 일종의 슬롯이자 구체적인 객체들의 타입을 캡슐화하는 추상화
- 협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있다면 `역할`. 단지 한 종류의 객체만이 협력에 참여할 필요가 있다면 `객체`.
- 협력은 역할들의 상호작용으로 구성되고, 협력을 구상하기 위해 역할에 적합한 객체가 선택되며, 객체는 클래스를 이용해 구현되고 생성된다.
- 역할 모델링 : 상호작용하는 객체들의 협력 패턴을 역할들 사이의 협력 패턴으로 추상화함으로써 유연하고 재사용 가능한 시스템을 얻을 수 있는 방법

## 객체와 역할

- 객체는 다양한 역할을 가질 수 있다.

- 객체는 협력에 참여할 때 협력 안에서 하나의 역할로 보여진다.

- 객체가 다른 협력에 참여할 때는 다른 역할로 보여진다.

- 협력의 관점에서 동일한 역할을 수행하는 개체들은 서로 대체 가능하다.

- 역할은 특정한 객체의 종류를 캡슐화하기 때문에 동일한 역할을 수행하고 계약을 준수하는 대체 가능한 객체들은 다형적이다.