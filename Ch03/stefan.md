# Ch03. 역할,책임,협력

> 객체지향 패러다임 관점에서 핵심은 `역할`, `책임`, `협력`이다. 객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것이다.

## 협력

### 협력

- 메시지 전송을 통해 객체들은 서로 협력을 시작한다.
- 메시지 요청을 받은 객체는 처리 방법을 `자율적으로` 선택한다.
- 내부 구현을 캡슐화하여 객체를 자율적으로 만든다.
- 캡슐화를 통해 부수효과를 제한할 수 있다.
- 스스로 하지 못하는 일은 타 객체에게 위임하여 수행한다.

### 협력이 설계의 문맥을 결정한다.

- 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다.
- 협력이 바뀌면 행동도 바뀌어야함.
- 행동을 결정하는 것은 협력. 상태를 결정하는 것은 행동.

## 책임

- 책임: 협력에 참여하기 위해 객체가 하는 행동
- 책임은 `하는 것`과 `아는 것`으로 나눈다.
- 책임은 외부 인터페이스와 내부의 속성을 결정함.

### 책임 할당

- 책임을 가장 잘 수행할 수 있는 객체에 그 책임을 할당.
- 요청에 응답하기 위한 이 행동이 객체가 수행할 책임이 된다.
- 협력을 먼저 정하고 책임을 할당한다.
- 책임은 메시지의 이름을 정의하는 것과 같다. (예매하라)
- 이후, 메시지를 처리할 객체를 선택해야한다.
- 이러한 과정을 반복하면서 객체지향 설계가 이뤄진다.

### 책임 주도 설계

- 메시지가 객체를 결정.
  1. 객체가 최소한의 (필요한 만큼의) 인터페이스를 가지게 한다.
  2. 객체는 충분히 추상적인 인터페이스를 가질 수 있게 된다.
- 행동이 상태를 결정.

  - 객체는 협력에 필요한 행동을 제공해야함.
  - 상태는 그저 재료일뿐.
    -> 협력이 객체의 행동 결정, 행동이 상태 결정. 여기서 행동이 객체의 책임.

## 역할

- 협력 안에서 수행하는 책임의 집합. (e.g. DiscountPolicy)
- 역할을 통해 유연하고 재사용 가능한 협력을 설계할 수 있다.
- 동일한 책임을 수행하는 역할을 기반으로 여러 개의 협력을 하나로 통합할 수 있게 된다.
  - 재사용 및 중복 제거.

### 역할과 추상화

- 추상화
  - `상위 수준`에서 단순화할 수 있다.
  - 설계가 유연해짐. (공통의 책임을 바탕으로 객체의 종류를 숨김)
    - DiscountPolicy로 여러 구현체들을 추상화할 수 있음.
